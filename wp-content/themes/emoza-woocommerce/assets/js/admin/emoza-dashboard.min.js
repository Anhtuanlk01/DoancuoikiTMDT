"use strict";!function(){var P=window.jQuery,V=P(window);P.fn.stick_in_parent=function(a){var _,t,e,o,k,y=(a=null==a?{}:a).sticky_class,C=a.inner_scrolling,x=a.recalc_every,j=a.parent,D=a.offset_top,T=a.spacer,F=a.bottoming;for(null==D&&(D=0),null==j&&(j=void 0),null==C&&(C=!0),null==y&&(y="is_stuck"),_=P(document),null==F&&(F=!0),k=function(a){var t;return window.getComputedStyle?(a=window.getComputedStyle(a[0]),t=parseFloat(a.getPropertyValue("width"))+parseFloat(a.getPropertyValue("margin-left"))+parseFloat(a.getPropertyValue("margin-right")),"border-box"!==a.getPropertyValue("box-sizing")&&(t+=parseFloat(a.getPropertyValue("border-left-width"))+parseFloat(a.getPropertyValue("border-right-width"))+parseFloat(a.getPropertyValue("padding-left"))+parseFloat(a.getPropertyValue("padding-right"))),t):a.outerWidth(!0)},t=function(i,n,s,d,l,r,c,m){var p,a,h,u,f,g,v,b,t,w,z,o;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),f=_.height(),v=i.parent(),!(v=null!=j?v.closest(j):v).length)throw"failed to find stick parent";if(p=h=!1,(z=null!=T?T&&i.closest(T):P("<div />"))&&z.css("position",i.css("position")),(b=function(){var a,t,e;if(!m&&(f=_.height(),a=parseInt(v.css("border-top-width"),10),t=parseInt(v.css("padding-top"),10),n=parseInt(v.css("padding-bottom"),10),s=v.offset().top+a+t,d=v.height(),h&&(p=h=!1,null==T&&(i.insertAfter(z),z.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(y),e=!0),l=i.offset().top-(parseInt(i.css("margin-top"),10)||0)-D,r=i.outerHeight(!0),c=i.css("float"),z&&z.css({width:k(i),height:r,display:i.css("display"),"vertical-align":i.css("vertical-align"),float:c}),e))return o()})(),r!==d)return u=void 0,g=D,w=x,o=function(){var a,t,e,o;if(!m&&(e=!1,null!=w&&--w<=0&&(w=x,b(),e=!0),e||_.height()===f||b(),e=V.scrollTop(),null!=u&&(t=e-u),u=e,h?(F&&(o=d+s<e+r+g,p)&&!o&&(p=!1,i.css({position:"fixed",bottom:"",top:g}).trigger("sticky_kit:unbottom")),e<l&&(h=!1,g=D,null==T&&("left"!==c&&"right"!==c||i.insertAfter(z),z.detach()),i.css(a={position:"",width:"",top:""}).removeClass(y).trigger("sticky_kit:unstick")),C&&(a=V.height())<r+D&&!p&&(g-=t,g=Math.max(a-r,g),g=Math.min(D,g),h)&&i.css({top:g+"px"})):l<e&&(h=!0,(a={position:"fixed",top:g}).width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(a).addClass(y),null==T&&(i.after(z),"left"!==c&&"right"!==c||z.append(i)),i.trigger("sticky_kit:stick")),h)&&F&&(null==o&&(o=d+s<e+r+g),!p)&&o)return p=!0,"static"===v.css("position")&&v.css({position:"relative"}),i.css({position:"absolute",bottom:n,top:"auto"}).trigger("sticky_kit:bottom")},t=function(){return b(),o()},a=function(){if(m=!0,V.off("touchmove",o),V.off("scroll",o),V.off("resize",t),P(document.body).off("sticky_kit:recalc",t),i.off("sticky_kit:detach",a),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),v.position("position",""),h)return null==T&&("left"!==c&&"right"!==c||i.insertAfter(z),z.remove()),i.removeClass(y)},V.on("touchmove",o),V.on("scroll",o),V.on("resize",t),P(document.body).on("sticky_kit:recalc",t),i.on("sticky_kit:detach",a),setTimeout(o,0)}},e=0,o=this.length;e<o;e++)a=this[e],t(P(a));return this}}.call(void 0),function(p){p(document).ready(function(){p("body");var a=p(".wp-header-end"),t=p(".emoza-dashboard-notice"),e=(a.length&&t.length&&(a.after(t),t.addClass("show")),p(".emoza-dashboard-dismissable")),a=(e.length&&e.on("click",function(){e.parent().hide(),p.post(window.emoza_dashboard.ajax_url,{action:"emoza_dismissed_handler",nonce:window.emoza_dashboard.nonce,notice:e.data("notice")})}),p(".emoza-dashboard-tabs-nav")),t=(a.length&&a.each(function(){var e=p(this).data("tab-wrapper-id");p(this).find(".emoza-dashboard-tabs-nav-link:not(.no-tabs-link)").on("click",function(a){a.preventDefault();var a=p(this).closest(".emoza-dashboard-tabs-nav").find(".emoza-dashboard-tabs-nav-link"),t=p(this).data("tab-to"),a=(a.each(function(){p(this).closest(".emoza-dashboard-tabs-nav-item").removeClass("active")}),p(this).closest(".emoza-dashboard-tabs-nav-item").addClass("active"),p('.emoza-dashboard-tab-content-wrapper[data-tab-wrapper-id="'+e+'"]'));a.find("> .emoza-dashboard-tab-content").removeClass("active"),a.find('> .emoza-dashboard-tab-content[data-tab-content-id="'+t+'"]').addClass("active"),"home"===t&&p(document.body).trigger("sticky_kit:recalc")})}),p(".emoza-license-button")),a=(t.length&&t.on("click",function(a){var t=p(this);"activate"===t.data("type")?t.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.activating):t.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.deactivating)}),p(".emoza-dashboard-plugin-ajax-button")),t=(a.length&&a.on("click",function(a){a.preventDefault();var o=p(this),t=o.attr("href"),a=o.data("slug"),e=o.data("type"),i=o.data("path"),n=o.html();o.addClass("emoza-ajax-progress"),o.parent().siblings(".emoza-dashboard-hero-warning").remove(),"install"===e?o.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.installing):"activate"===e?o.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.activating):"deactivate"===e&&o.html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.deactivating),p.post(window.emoza_dashboard.ajax_url,{action:"emoza_plugin",nonce:window.emoza_dashboard.nonce,slug:a,type:e,path:i},function(a){if(a.success){if(o.hasClass("emoza-ajax-success-redirect"))return setTimeout(function(){o.html(window.emoza_dashboard.i18n.redirecting),setTimeout(function(){window.location=t},1e3)},500),!1;"install"===e?o.html(window.emoza_dashboard.i18n.deactivate).removeClass("emoza-dashboard-link-info").addClass("emoza-dashboard-link-danger").removeClass("loading").data("type","deactivate"):"deactivate"===e?o.html(window.emoza_dashboard.i18n.activate).removeClass("emoza-dashboard-link-danger").addClass("emoza-dashboard-link-success").removeClass("loading").data("type","activate"):o.html(window.emoza_dashboard.i18n.deactivate).removeClass("emoza-dashboard-link-success").addClass("emoza-dashboard-link-danger").removeClass("loading").data("type","deactivate"),o.removeClass("emoza-ajax-progress")}else a.data?(o.html(n),o.parent().after('<div class="emoza-dashboard-hero-warning">'+a.data+"</div>")):(o.html(n),o.parent().after('<div class="emoza-dashboard-hero-warning">'+window.emoza_dashboard.i18n.failed_message+"</div>"))}).fail(function(a,t,e){o.html(n),o.parent().after('<div class="emoza-dashboard-hero-warning">'+window.emoza_dashboard.i18n.failed_message+"</div>")})}),p(".emoza-dashboard-option-switcher")),a=(t.length&&t.on("click",function(a){a.preventDefault();var t=p(this),a=t.data("option-id"),e=!!t.data("option-activate"),o=e?window.emoza_dashboard.i18n.activating:window.emoza_dashboard.i18n.deactivating,i=!!t.data("module-after-activation-redirect"),n=i?t.data("module-after-activation-redirect"):"";t.html('<i class="dashicons dashicons-update-alt"></i>'+o).removeClass("emoza-dashboard-link-success").addClass("loading"),p.post(window.emoza_dashboard.ajax_url,{action:"emoza_option_switcher_handler",nonce:window.emoza_dashboard.nonce,optionId:a,activate:e},function(a){a.success&&(e?(t.html(window.emoza_dashboard.i18n.deactivate).removeClass("emoza-dashboard-link-success").addClass("emoza-dashboard-link-danger").removeClass("loading").data("option-activate",!1),t.parent().find(".emoza-dashboard-customize-link").removeClass("bt-d-none"),i&&(window.location=n)):(t.html(window.emoza_dashboard.i18n.activate).removeClass("emoza-dashboard-link-danger").addClass("emoza-dashboard-link-success").removeClass("loading").data("option-activate",!0),t.parent().find(".emoza-dashboard-customize-link").addClass("bt-d-none")))})}),p(".emoza-dashboard-module-activation")),t=(a.length&&a.on("click",function(a){a.preventDefault();var t=p(this),a=t.data("module-id"),e=!!t.data("module-activate"),o=e?window.emoza_dashboard.i18n.activating:window.emoza_dashboard.i18n.deactivating,i=!!t.data("module-after-activation-redirect"),n=i?t.data("module-after-activation-redirect"):"";t.html('<i class="dashicons dashicons-update-alt"></i>'+o).removeClass("emoza-dashboard-link-success").addClass("loading"),p.post(window.emoza_dashboard.ajax_url,{action:"emoza_module_activation_handler",nonce:window.emoza_dashboard.nonce,module:a,activate:e},function(a){a.success&&(e?(t.html(window.emoza_dashboard.i18n.deactivate).removeClass("emoza-dashboard-link-success").addClass("emoza-dashboard-link-danger").removeClass("loading").data("module-activate",!1),t.parent().find(".emoza-dashboard-customize-link").removeClass("bt-d-none"),i&&(window.location=n)):(t.html(window.emoza_dashboard.i18n.activate).removeClass("emoza-dashboard-link-danger").addClass("emoza-dashboard-link-success").removeClass("loading").data("module-activate",!0),t.parent().find(".emoza-dashboard-customize-link").addClass("bt-d-none")))})}),p(".emoza-dashboard-module-activation-all")),a=(t.length&&t.on("click",function(a){a.preventDefault();var a=p(this),t=!!a.data("module-activate"),e=t?window.emoza_dashboard.i18n.activating:window.emoza_dashboard.i18n.deactivating;a.html(e).addClass("loading"),p.post(window.emoza_dashboard.ajax_url,{action:"emoza_module_activation_all_handler",nonce:window.emoza_dashboard.nonce,activate:t},function(a){a.success&&window.location.reload()})}),p("[data-bt-toggle-expand]")),o=(a.length&&(a.on("click",function(a){var t=p(this),e=t.find(".bt-toggle-expand-content");null===a.target.closest(".emoza-dashboard-content-expand-content")&&(t.hasClass("bt-collapsed")?(e.slideDown("fast"),t.removeClass("bt-collapsed")):(e.slideUp("fast"),t.addClass("bt-collapsed")))}),a.find(".emoza-dashboard-content-expand-link").on("click",function(a){a.preventDefault()})),p(".emoza-dashboard-sticky-wrapper").stick_in_parent({offset_top:54}),p(".emoza-dashboard-notifications-sidebar")),i=(o.length&&(p(".emoza-dashboard-theme-notifications").on("click",function(a){a.preventDefault();a=o.find(".emoza-dashboard-notification:first-child .emoza-dashboard-notification-date").data("raw-date");o.toggleClass("opened"),p(this).hasClass("read")||p.post(window.emoza_dashboard.ajax_url,{action:"emoza_notifications_read",latest_notification_date:a,nonce:window.emoza_dashboard.nonce},function(a){a.success&&setTimeout(function(){p(".emoza-dashboard-theme-notifications").addClass("read")},2e3)})}),p(window).on("scroll",function(){60<window.pageYOffset&&(o.addClass("closing"),setTimeout(function(){o.removeClass("opened"),o.removeClass("closing")},300))}),p(".emoza-dashboard-notifications-sidebar-close").on("click",function(a){a.preventDefault(),o.addClass("closing"),setTimeout(function(){o.removeClass("opened"),o.removeClass("closing")},300)})),p("#save-templates"));function l(){"sydney"!=p(".emoza-dashboard-container").data("theme")&&(p("#save-templates").removeClass("saved"),p(window).on("beforeunload",function(){if(!p("#save-templates").hasClass("saved"))return window.emoza_dashboard.i18n.unsaved_changes}))}i.length&&i.on("click",function(a){a.preventDefault(),p(this).html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.saving);var m=[];p("#template-builder .template-item").each(function(){var a=p(this).data("id"),t=p(this).find('input[name="template_name"]').val(),e=p(this).find('input[name="conditions"]').val(),o=p(this).find('input[name="header"]').val(),i=p(this).find(".template-part.header").data("page-builder"),n=p(this).find('input[name="page_title"]').val(),s=p(this).find(".template-part.page_title").data("page-builder"),d=p(this).find('input[name="content"]').val(),l=p(this).find(".template-part.content").data("page-builder"),r=p(this).find('input[name="footer"]').val(),c=p(this).find(".template-part.footer").data("page-builder");m.push({id:a,template_name:t,header:o,header_builder:i,page_title:n,page_title_builder:s,content:d,content_builder:l,footer:r,footer_builder:c,conditions:e})}),p.post(window.emoza_dashboard.ajax_url,{action:"emoza_template_builder_data",data:m,nonce:window.emoza_dashboard.nonce},function(a){a.success&&(i.html(window.emoza_dashboard.i18n.saved),p("#save-templates").addClass("saved"),setTimeout(function(){i.html(window.emoza_dashboard.i18n.save),i.blur()},2e3))})}),p("#add-new-template").length&&p("#add-new-template").on("click",function(){var a=p("#template-builder .template-item").first().clone();a.attr("data-id","emoza-template-"+Math.random().toString(36).slice(2)),a.find("h4").replaceWith('<input type="text" placeholder="Template name" name="template_name" value="">'),a.find(".template-options").show(),a.find("input").val(""),a.find(".template-part").attr("data-part-active","inactive"),a.appendTo("#template-builder"),l()}),p(document).on("click",".part-options-toggle",function(){p(this).parent().find(".part-options").fadeToggle(100),p(this).find("span").toggleClass("dashicons-ellipsis dashicons-no-alt")}),p(document).on("click",".template-part-inner .not-selected",function(){p(this).parent().parent().find(".part-options").fadeToggle(100),p(this).parent().parent().next(".part-options-toggle").find("span").toggleClass("dashicons-ellipsis dashicons-no-alt")}),p(document).on("click",".template-options .delete-template",function(a){a.preventDefault(),p(this).closest(".template-item").fadeOut(300,function(){p(this).remove()}),l()}),p("#template-builder").sortable({opacity:.6,revert:!0,animation:150,cursor:"move",cancel:".not-sortable",handle:".sort-handle"}),p(document).on("click",".template-options .duplicate-template",function(a){a.preventDefault();a=p(this).closest(".template-item").clone();a.attr("data-id","emoza-template-"+Math.random().toString(36).slice(2)),a.insertAfter(p(this).closest(".template-item")).hide().fadeIn(300),l()}),p(document).on("click",".part-options .select-existing",function(){p(this).parent().parent().parent().find(".existing-parts-wrapper").fadeToggle(50),p(document).mouseup(function(a){var t=p(".existing-parts-wrapper");t.is(a.target)||0!==t.has(a.target).length||p(a.target).hasClass("select-existing")||t.fadeOut(50)})}),p(document).on("change",".existing-parts-select",function(){var a=p(this).closest(".template-item"),t=p(this).val(),e=p(this).parents(".template-part").data("part-type"),o=p(this).find(":selected").data("page-builder");a.find('input[name="'+e+'"]').val(t),t&&(p(this).parents(".template-part").attr("data-part-active","active"),p(this).parents(".template-part").attr("data-page-builder",o),p(this).parents(".template-part").find(".part-title").find(".selected").show().siblings().hide()),l()}),p(document).on("click",".part-options .reset",function(){var a=p(this).closest(".template-item"),t=p(this).parents(".template-part").data("part-type");a.find('input[name="'+t+'"]').val(""),p(this).parents(".template-part").attr("data-part-active","inactive"),p(this).parents(".template-part").find(".part-title").find(".not-selected").show().siblings().hide(),p(this).parent().fadeToggle(100),p(this).parents(".template-part").find(".part-options-toggle span").toggleClass("dashicons-ellipsis dashicons-no-alt"),l()}),p(document).on("click",".part-options .select-page-builder",function(){p(this).closest(".template-item");p(this).parent().parent().parent().find(".page-builder-wrapper").fadeToggle(50),p(document).mouseup(function(a){var t=p(".page-builder-wrapper");t.is(a.target)||0!==t.has(a.target).length||p(a.target).hasClass("select-page-builder")||t.fadeOut(50)})}),p(document).on("click",".page-builder-wrapper .create-new",function(){var t=p(this).closest(".template-item"),a=t.data("id"),e=p(this).parents(".template-part"),o=e.data("part-type"),i=p(".emoza-elementor-iframe-wrapper"),n=i.find(".emoza-elementor-iframe"),s=p(this).data("page-builder"),d=p(this).html();return p(this).html(d+'<i class="dashicons dashicons-update-alt page-builder-spinner" style="position:relative;top:10px;left:5px;"></i>'),p.post(window.emoza_dashboard.ajax_url,{action:"insert_template_part_callback",key:a,part_type:o,page_builder:s,nonce:window.emoza_dashboard.nonce},function(a){a.success&&(t.find('input[name="'+o+'"]').val(a.data.id),"elementor"==s?(n.attr("src",a.data.url),n.on("load",function(){i.show(),i.css("z-index","9999")}),p(document).on("click",".emoza-editor-close",function(){i.hide(),i.css("z-index","0")})):window.open(a.data.url,"_blank"),l(),e.attr("data-page-builder",s),setTimeout(function(){e.attr("data-part-active","active"),e.find(".part-title").find(".selected").show().siblings().hide(),p(".page-builder-spinner").remove()},3e3))}),!1}),p(document).on("click",".part-options .edit-part",function(){var t=p(this).parents(".template-part"),a=t.data("part-type"),e=p(this).text(),o=t.find('input[name="'+a+'"]').val(),i=p(".emoza-elementor-iframe-wrapper"),n=i.find(".emoza-elementor-iframe"),s=t.data("page-builder");p(this).html('<i class="dashicons dashicons-update-alt"></i>'+window.emoza_dashboard.i18n.loading),p.post(window.emoza_dashboard.ajax_url,{action:"edit_template_part_callback",key:o,part_type:a,page_builder:s,nonce:window.emoza_dashboard.nonce},function(a){a.success&&("elementor"==s?(n.attr("src",a.data.url),n.on("load",function(){i.show(),i.css("z-index","9999")}),p(document).on("click",".emoza-editor-close",function(){i.hide(),i.css("z-index","0")})):window.open(a.data.url,"_blank")),setTimeout(function(){t.find(".edit-part").html(e)},3e3)})}),p(document).on("emoza-display-conditions-select2-initalize",function(a,t){var t=p(t),e=(t.closest(".emoza-display-conditions-control"),t.find(".emoza-display-conditions-select2-type")),o=e.find("select"),i=t.find(".emoza-display-conditions-select2-condition").find("select"),n=t.find(".emoza-display-conditions-select2-id"),s=n.find("select");o.select2({width:"100%",minimumResultsForSearch:-1}),o.on("select2:select",function(a){e.attr("data-type",a.params.data.id)}),i.select2({width:"100%"}),i.on("select2:select",function(a){p(a.params.data.element).data("ajax")?n.removeClass("hidden"):n.addClass("hidden"),s.val(null).trigger("change")}),i.find(":selected").data("ajax")&&n.removeClass("hidden"),s.select2({width:"100%",placeholder:"",allowClear:!0,minimumInputLength:1,ajax:{url:window.emoza_dashboard.ajax_url,dataType:"json",delay:250,cache:!0,data:function(a){return{action:"templates_builder_display_conditions_select_ajax",term:a.term,nonce:window.emoza_dashboard.nonce,source:i.val()}},processResults:function(a,t){return a.success?{results:a.data}:{}}}})}),p(document).on("click",".emoza-display-conditions-modal-toggle",function(a){a.preventDefault();var a=p(this),t=wp.template("emoza-display-conditions-template"),a=a.closest(".emoza-display-conditions-control"),e=a.find(".emoza-display-conditions-modal");e.data("initialized")?e.toggleClass("open"):(a.append(t(a.data("condition-settings"))),(t=a.find(".emoza-display-conditions-modal-content-list-item").not(".hidden")).length&&t.each(function(){p(document).trigger("emoza-display-conditions-select2-initalize",this)}),(e=a.find(".emoza-display-conditions-modal")).data("initialized",!0),e.addClass("open"))}),p(document).on("click",".emoza-display-conditions-modal",function(a){a.preventDefault();var t=p(this);p(a.target).is(t)&&p(".emoza-display-conditions-modal").removeClass("open")}),p(document).on("click",".emoza-display-conditions-modal-add",function(a){a.preventDefault();var a=p(this),t=a.closest(".emoza-display-conditions-control").find(".emoza-display-conditions-modal"),e=t.find(".emoza-display-conditions-modal-content-list"),t=t.find(".emoza-display-conditions-modal-content-list-item").first().clone(),a=a.data("condition-group");t.removeClass("hidden"),t.find(".emoza-display-conditions-select2-condition").not('[data-condition-group="'+a+'"]').remove(),e.append(t),p(document).trigger("emoza-display-conditions-select2-initalize",t)}),p(document).on("click",".emoza-display-conditions-modal-remove",function(a){a.preventDefault(),p(this).closest(".emoza-display-conditions-modal-content-list-item").remove()}),p(document).on("click",".emoza-display-conditions-modal-save",function(a){a.preventDefault();var t=[],a=p(this).closest(".emoza-display-conditions-control"),e=a.find(".emoza-display-conditions-modal"),a=a.find(".emoza-display-conditions-textarea");e.find(".emoza-display-conditions-modal-content-list-item").not(".hidden").each(function(){var a=p(this);t.push({type:a.find('select[name="type"]').val(),condition:a.find('select[name="condition"]').val(),id:a.find('select[name="id"]').val()})}),a.val(JSON.stringify(t)).trigger("change")})})}(jQuery);